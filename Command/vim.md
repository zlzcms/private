# Vim 编辑器详细使用指南

### 正常模式 (Normal Mode)

- 启动 Vim 后的默认模式

- 用于导航、复制、粘贴、删除等操作

- 按 `Esc`键可返回正常模式

### 插入模式 (Insert Mode)

- 用于输入和编辑文本

- 从正常模式进入插入模式的方式：
  
  - `i`- 在光标前插入
  
  - `a`- 在光标后插入
  
  - `I`- 在行首插入
  
  - `A`- 在行尾插入
  
  - `o`- 在当前行下方新建一行
  
  - `O`- 在当前行上方新建一行

### 命令行模式 (Command Mode)

- 用于保存、退出、搜索替换等操作

- 从正常模式按 `:`进入

## 2. 启动和退出 Vim

### 启动 Vim

vim filename        # 编辑指定文件 

vim                # 启动空编辑器 

vim +10 filename   # 打开文件并定位到第10行 

vim +/pattern filename  # 打开文件并搜索模式

### 退出 Vim

:q                 # 退出（如果文件未修改） 

:q!                # 强制退出，不保存修改 

:wq 或 :x 或 ZZ   # 保存并退出 

:w                 # 保存文件 

:w filename        # 另存为

## 3. 光标移动（正常模式）

### 基本移动

h - 左        

j - 下        

k - 上        

l - 右 0 - 行首      

$ - 行尾      

^ - 行首非空字符`

### 单词移动

w  - 下一个单词开头 

W  - 下一个单词开头（忽略标点） 

e  - 单词结尾 E  - 单词结尾（忽略标点） 

b  - 上一个单词开头 

B  - 上一个单词开头（忽略标点）

### 屏幕移动

Ctrl + f - 向下翻页 

Ctrl + b - 向上翻页 

Ctrl + d - 向下翻半页 

Ctrl + u - 向上翻半页 

H - 屏幕顶部 

M - 屏幕中间 

L - 屏幕底部

### 跳转

gg - 文件开头 

G  - 文件末尾

 :n 或 nG - 跳转到第n行

## 4. 文本编辑

### 插入文本

`i - 在光标前插入 a - 在光标后插入 I - 在行首插入 A - 在行尾插入 o - 在下方新建行 O - 在上方新建行`

### 删除文本

`x   - 删除当前字符 X   - 删除前一个字符 dd  - 删除当前行 dw  - 删除到单词末尾 d$  - 删除到行尾 d0  - 删除到行首`

### 复制和粘贴

`yy  - 复制当前行 yw  - 复制当前单词 y$  - 复制到行尾 p   - 在光标后粘贴 P   - 在光标前粘贴`

### 撤销和重做

`u   - 撤销 Ctrl + r - 重做`

## 5. 搜索和替换

### 搜索

`/pattern  - 向前搜索 ?pattern  - 向后搜索 n        - 下一个匹配 N        - 上一个匹配 *        - 搜索当前单词`

### 替换

`:%s/old/new/g          # 全局替换 :%s/old/new/gc         # 全局替换（带确认） :10,20s/old/new/g      # 替换10-20行 :s/old/new/g           # 替换当前行`

## 6. 可视模式

`v   - 字符可视模式 V   - 行可视模式 Ctrl + v - 块可视模式  # 在可视模式下可以选择文本，然后进行编辑操作`

## 7. 多文件编辑

`:edit filename     # 打开新文件 :bn               # 下一个缓冲区 :bp               # 上一个缓冲区 :bd               # 关闭当前缓冲区 :ls               # 列出所有缓冲区 :sp filename      # 水平分割窗口 :vsp filename     # 垂直分割窗口 Ctrl + ww         # 在窗口间切换`

## 8. 高级功能

### 宏录制

`qa               # 开始录制宏到寄存器a ...执行操作... q                # 停止录制 @a               # 执行宏a @@               # 重复上次执行的宏`

### 标记

`ma              # 设置标记a（a可以是任意字母） 'a              # 跳转到标记a :marks          # 查看所有标记`

### 缩进

`>>              # 增加缩进 <<              # 减少缩进 =               # 自动缩进 gg=G           # 全文自动缩进`

## 9. 实用配置（~/.vimrc）

`" 基本设置 set number              " 显示行号 set relativenumber      " 显示相对行号 syntax on              " 语法高亮 set tabstop=4          " Tab宽度为4空格 set shiftwidth=4       " 自动缩进宽度 set expandtab          " 将Tab转换为空格 set autoindent         " 自动缩进  " 搜索设置 set ignorecase         " 忽略大小写 set smartcase          " 智能大小写 set hlsearch           " 高亮搜索结果  " 其他实用设置 set mouse=a            " 启用鼠标 set backspace=indent,eol,start  " 退格键行为 set encoding=utf-8     " 编码设置`

## 10. 实用技巧和快捷键

### 快速编辑

`Ctrl + n          # 自动补全 .                 # 重复上次操作 %                 # 在匹配的括号间跳转 gUw               # 将单词转为大写 guw               # 将单词转为小写`

### 批量操作

`:normal命令       # 在多行执行普通模式命令 :g/pattern/命令   # 对匹配模式的行执行命令`

## 11. 插件管理（Vim 8+ 原生包管理）

`# 创建插件目录 mkdir -p ~/.vim/pack/plugins/start  # 安装插件示例（如NERDTree） cd ~/.vim/pack/plugins/start git clone https://github.com/preservim/nerdtree.git`

## 12. 常用命令总结表

| 命令       | 功能     | 模式    |
| -------- | ------ | ----- |
| `i`      | 插入模式   | 正常→插入 |
| `Esc`    | 返回正常模式 | 所有→正常 |
| `:w`     | 保存文件   | 命令行   |
| `:q`     | 退出     | 命令行   |
| `dd`     | 删除行    | 正常    |
| `yy`     | 复制行    | 正常    |
| `p`      | 粘贴     | 正常    |
| `u`      | 撤销     | 正常    |
| `Ctrl+r` | 重做     | 正常    |
| `/text`  | 搜索文本   | 命令行   |
